<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>JavaScript | nostalgia</title><meta name="description" content="Just playing around">
    <link rel="modulepreload" href="/nostalgia/assets/app-c5939a72.js"><link rel="modulepreload" href="/nostalgia/assets/js.html-fece6d55.js"><link rel="modulepreload" href="/nostalgia/assets/js.html-e60836d2.js"><link rel="prefetch" href="/nostalgia/assets/index.html-0a05feab.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-4b3ba946.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-e901a9ed.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-30178123.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-7513af96.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-86540297.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-6b3dbad3.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-5d7f901a.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-7f3eeb92.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-35b38f45.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-e1e2c2da.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-fa97dbe9.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-bcce1cd3.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-9859a64c.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-31679463.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-c8596e07.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-24a062b7.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-1a88d37b.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-692b7a47.js" as="script"><link rel="prefetch" href="/nostalgia/assets/vuepress.html-c84ab720.js" as="script"><link rel="prefetch" href="/nostalgia/assets/resume.html-2e7a7392.js" as="script"><link rel="prefetch" href="/nostalgia/assets/vue3.html-cfeefbc6.js" as="script"><link rel="prefetch" href="/nostalgia/assets/webpack.html-af1a9ca7.js" as="script"><link rel="prefetch" href="/nostalgia/assets/guide.html-f99852cd.js" as="script"><link rel="prefetch" href="/nostalgia/assets/markdownGuide.html-c6acf9b6.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-72083adf.js" as="script"><link rel="prefetch" href="/nostalgia/assets/array-loop.html-49a5a44b.js" as="script"><link rel="prefetch" href="/nostalgia/assets/download.html-561a73cc.js" as="script"><link rel="prefetch" href="/nostalgia/assets/es6.html-9b252448.js" as="script"><link rel="prefetch" href="/nostalgia/assets/git-action.html-d23962d2.js" as="script"><link rel="prefetch" href="/nostalgia/assets/git.html-2a83b716.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-68fcc446.js" as="script"><link rel="prefetch" href="/nostalgia/assets/css.html-07b9034f.js" as="script"><link rel="prefetch" href="/nostalgia/assets/http.html-5ac5d5a2.js" as="script"><link rel="prefetch" href="/nostalgia/assets/other.html-3773cf6f.js" as="script"><link rel="prefetch" href="/nostalgia/assets/react.html-e9136e01.js" as="script"><link rel="prefetch" href="/nostalgia/assets/ts.html-1f463422.js" as="script"><link rel="prefetch" href="/nostalgia/assets/vue.html-756273b9.js" as="script"><link rel="prefetch" href="/nostalgia/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-1b8ed0a0.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-086e8417.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-acd034b0.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-f77a580c.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-77d837d1.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-c3bef366.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-0263a604.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-07939f82.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-38377624.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-f41451e0.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-3652ea24.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-e4081b6e.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-d8d5ea29.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-351ab4e7.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-23099849.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-31e267be.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-d6f39d97.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-308d83b1.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-774f04f1.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-e2f48e16.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-c0bd3310.js" as="script"><link rel="prefetch" href="/nostalgia/assets/vuepress.html-a6324dd6.js" as="script"><link rel="prefetch" href="/nostalgia/assets/resume.html-41ad3757.js" as="script"><link rel="prefetch" href="/nostalgia/assets/vue3.html-bd8b0d2c.js" as="script"><link rel="prefetch" href="/nostalgia/assets/webpack.html-38722007.js" as="script"><link rel="prefetch" href="/nostalgia/assets/guide.html-2fff879c.js" as="script"><link rel="prefetch" href="/nostalgia/assets/markdownGuide.html-aaed3445.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-6e82d25d.js" as="script"><link rel="prefetch" href="/nostalgia/assets/array-loop.html-e0387403.js" as="script"><link rel="prefetch" href="/nostalgia/assets/download.html-8e121092.js" as="script"><link rel="prefetch" href="/nostalgia/assets/es6.html-8d19f1aa.js" as="script"><link rel="prefetch" href="/nostalgia/assets/git-action.html-593a2017.js" as="script"><link rel="prefetch" href="/nostalgia/assets/git.html-521b078f.js" as="script"><link rel="prefetch" href="/nostalgia/assets/index.html-ff3530df.js" as="script"><link rel="prefetch" href="/nostalgia/assets/css.html-01e9f77b.js" as="script"><link rel="prefetch" href="/nostalgia/assets/http.html-e6f136b5.js" as="script"><link rel="prefetch" href="/nostalgia/assets/other.html-ce124195.js" as="script"><link rel="prefetch" href="/nostalgia/assets/react.html-c41e0794.js" as="script"><link rel="prefetch" href="/nostalgia/assets/ts.html-e461a90e.js" as="script"><link rel="prefetch" href="/nostalgia/assets/vue.html-29ceec21.js" as="script"><link rel="prefetch" href="/nostalgia/assets/404.html-66ead8b9.js" as="script"><link rel="prefetch" href="/nostalgia/assets/reco-valine-a195b6e9.js" as="script"><link rel="prefetch" href="/nostalgia/assets/giscus-2a044aea-497f0bd4.js" as="script">
    <link rel="preload" href="/nostalgia/assets/style-d8fc2612.css" as="style"><link rel="stylesheet" href="/nostalgia/assets/style-d8fc2612.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper show-series show-catalog"><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="/nostalgia/logo.png" alt="nostalgia"><a href="/nostalgia/" class="site-name can-hide">nostalgia</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/nostalgia/" class="link router-link-active" aria-label="Home"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Home<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/nostalgia/categories/reco/1/" class="link" aria-label="Categories"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Categories<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/nostalgia/tags/tips/1/" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/nostalgia/timeline" class="link" aria-label="TimeLine"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TimeLine<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="Docs"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Docs<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="Docs"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Docs<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/nostalgia/blogs/other/guide" class="link" aria-label="vuepress-theme-reco"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress-theme-reco<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><header class="sub-navbar-container"><span class="nav-item"><div class="toggle-series-button" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div> Series </span></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/nostalgia/" class="link router-link-active" aria-label="Home"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Home<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/nostalgia/categories/reco/1/" class="link" aria-label="Categories"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Categories<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/nostalgia/tags/tips/1/" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/nostalgia/timeline" class="link" aria-label="TimeLine"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TimeLine<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="Docs"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Docs<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="Docs"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Docs<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/nostalgia/blogs/other/guide" class="link" aria-label="vuepress-theme-reco"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress-theme-reco<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/nostalgia/logo.png" alt="nostalgia"><a href="/nostalgia/" class="site-name can-hide">nostalgia</a></div><!--[--><!--[--><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html" class="router-link-active router-link-exact-active link router-link-active series-item active" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/nostalgia/blogs/frontend/question/css.html" class="link series-item" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html" class="router-link-active router-link-exact-active link router-link-active series-item active" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/nostalgia/blogs/frontend/question/vue.html" class="link series-item" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/nostalgia/blogs/frontend/question/react.html" class="link series-item" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/nostalgia/blogs/frontend/question/ts.html" class="link series-item" aria-label="TypeScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/nostalgia/blogs/frontend/question/other.html" class="link series-item" aria-label="算法,设计模式"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法,设计模式<!--]--></span></span><!--[--><!--]--></a><!--]--><!--[--><a href="/nostalgia/blogs/frontend/question/http.html" class="link series-item" aria-label="Http"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Http<!--]--></span></span><!--[--><!--]--></a><!--]--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">JavaScript</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->umwelt<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2021-08-22<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->frontend<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->js<!--]--></span></span><!----></div><div class="theme-reco-default-content"><div><h2 id="javascript-es专题" tabindex="-1"><a class="header-anchor" href="#javascript-es专题" aria-hidden="true">#</a> JavaScript &amp; ES专题</h2><h3 id="什么是执行上下文" tabindex="-1"><a class="header-anchor" href="#什么是执行上下文" aria-hidden="true">#</a> 什么是执行上下文</h3><p>https://yuchengkai.cn/docs/frontend/#%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87</p><p>当执行 JS 代码时，会产生三种执行上下文</p><ul><li>全局执行上下文</li><li>函数执行上下文</li><li>eval 执行上下文</li></ul><p>每个执行上下文中都有三个重要的属性</p><ul><li>变量对象（VO），包含变量、函数声明和函数的形参，该属性只能在全局上下文中访问</li><li>作用域链（JS 采用词法作用域，也就是说变量的作用域是在定义时就决定了）</li><li>this</li></ul><p>在生成执行上下文时，会有两个阶段。</p><ol><li>第一个阶段是创建的阶段（具体步骤是创建 VO），JS 解释器会找出<code>需要提升</code>的<code>变量</code>和<code>函数</code>，并且给他们<code>提前</code>在内存中<code>开辟</code>好空间，<code>函数</code>的话会将整个函数<code>存入内存中</code>，变量<code>只声明</code>并且<code>赋值</code>为 <code>undefined</code>，</li><li>所以在第二个阶段，也就是代码执行阶段，我们可以直接<code>提前使用</code>。</li></ol><p>在提升的过程中，相同的函数会覆盖上一个函数，并且函数优先于变量提升</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// call b second</span>

<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;call b fist&#39;</span><span class="token punctuation">)</span><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    foo <span class="token operator">=</span> <span class="token number">10</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; ƒ foo() { foo = 10 ; console.log(foo) }</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;call b second&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">&#39;Hello world&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于非匿名的立即执行函数需要注意以下一点</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    foo <span class="token operator">=</span> <span class="token number">10</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; ƒ foo() { foo = 10 ; console.log(foo) }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因为当 JS 解释器在遇到<code>非匿名</code>的<code>立</code>即<code>执行</code>函数时，会创建一个辅助的特定对象，然后<code>将函数名称</code>作为这个<code>对象的属性</code>，因此函数内部才可以访问到 foo，但是这个值又是只读的，所以对它的赋值并不生效，所以打印的结果还是这个函数，并且外部的值也没有发生更改</p><h3 id="script异步加载-js-脚本时-async-与-defer-有何区别" tabindex="-1"><a class="header-anchor" href="#script异步加载-js-脚本时-async-与-defer-有何区别" aria-hidden="true">#</a> script异步加载 JS 脚本时，async 与 defer 有何区别</h3><p>在正常情况下，即 <code>&lt;script&gt;</code> 没有任何额外属性标记的情况下，有几点共识</p><p>JS 的脚本分为<code>加载</code>、<code>解析</code>、<code>执行</code>几个步骤，简单对应到就是 fetch (加载) 和 execution (解析并执行) JS 的脚本加载(fetch)且执行(execution)会阻塞 DOM 的渲染，因此 JS 一般放到最后头 而 defer 与 async 的区别如下:</p><p>相同点: <strong>异步加载 (fetch)</strong></p><p>不同点:</p><ul><li>async 加载(fetch)完成后<code>立即执行 (execution)</code>，因此可能<code>会阻塞 DOM 解析</code>；</li><li>defer 加载(fetch)完成后<code>延迟</code>到 <code>DOM 解析完成</code>后才会执行(execution)**，但会在事件 <code>DomContentLoaded</code>之前</li></ul><h3 id="什么是闭包-闭包的使用场景-如何清理垃圾回收" tabindex="-1"><a class="header-anchor" href="#什么是闭包-闭包的使用场景-如何清理垃圾回收" aria-hidden="true">#</a> 什么是闭包，闭包的使用场景 &amp; 如何清理垃圾回收</h3><p>闭包是一个函数, 其可以记住并访问外部变量.</p><ul><li>函数当参数</li><li>函数当返回值</li></ul><ol><li>在函数被创建时, 函数的隐藏属性 <code>[[Environment]]</code> 会记住<code>函数被创建时</code>的位置, 即<code>当时的词法环境</code> Lexical Environment</li><li>这样, 无论在哪里调用函数, 都会去到 [[Environment]] 所引用的词法环境</li></ol><p>当查找变量时, 先在词法环境<code>{ }</code>内部查找, 当没有找到局部变量时, 前往当前词法环境所记录的外部词法环境查找</p><blockquote><p>闭包的应用: 封装<code>私有变量</code>和处理<code>回调函数</code></p></blockquote><h3 id="this-是什么-绑定方式-call-apply-bind" tabindex="-1"><a class="header-anchor" href="#this-是什么-绑定方式-call-apply-bind" aria-hidden="true">#</a> this 是什么 &amp; 绑定方式（call apply bind）</h3><ul><li>new 绑定</li></ul><p>这是最后一种this绑定规则，要求我们重新思考JavaScript中关于函数和对象的常见误解。</p><p>JavaScript拥有着new操作符，而且使用它的代码模式和我们在面向类语言中看到的基本一样；大多数开发者猜测JavaScript机制在做某种相似的事情。但是，实际上JavaScript的机制和 new 在 JS中的用法所暗示的面相类的功能 没有任何联系。</p><p>首先，让我们重新定义JavaScript的构造器是什么？在JS中，<strong>构造器仅仅是一个函数</strong>，他们偶尔地与前置的 <strong>new</strong>操作符一起调用。它们本质上只是一般的函数，在被使用 <strong>new</strong>来调用时改变了行为。</p><p>所以，可以说任何函数在前面加上 new 来被调用，这使函数调用成为一个 <em><strong>构造器调用</strong></em>。这是一个重要而微妙的区别：实际上不存在 构造器函数 这样的东西，而只有函数的<strong>构造器调用</strong>。</p><p><strong>当在函数前面被加入 new 调用时，也就是构造器调用时，下面这些事情会自动完成</strong>：</p><ol><li>一个全新的对象会被凭空创建（就是被构建）</li><li>这个新构建的对象会被接入原型链 （ [[<code>Prototype</code>]] ）</li><li>这个新构建的对象被设置为函数调用的 **<code>this**</code> 绑定</li><li>除非函数返回一个它自己的其他<strong>对象</strong>，否则这个被 new 调用的函数将自动返回这个新构建的对象。</li></ol><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建一个空的对象</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 获得构造函数</span>
    <span class="token keyword">let</span> Con <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
    <span class="token comment">// 链接到原型</span>
    obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Con</span><span class="token punctuation">.</span>prototype
    <span class="token comment">// 绑定 this，执行构造函数</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">Con</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
    <span class="token comment">// 确保 new 出来的是个对象</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span> <span class="token operator">?</span> result <span class="token operator">:</span> obj
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>说下它的执行顺序 &amp; 解读下</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">val</span><span class="token operator">:</span> <span class="token number">45</span><span class="token punctuation">,</span>
  <span class="token function-variable function">fnn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    val <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj1<span class="token punctuation">.</span><span class="token function">fnn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ff <span class="token operator">=</span> obj1<span class="token punctuation">.</span>fnn<span class="token punctuation">;</span>
<span class="token function">ff</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 说下它的执行顺序 &amp; 解读下</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="什么是原型-原型链" tabindex="-1"><a class="header-anchor" href="#什么是原型-原型链" aria-hidden="true">#</a> 什么是原型 &amp; 原型链</h3><p>每个函数都有 <code>prototype</code>属性，除了 <code>Function.prototype.bind()</code>，该属性指向原型。</p><p>每个对象都有 <strong>proto</strong> 属性，指向了创建该对象的构造函数的原型。</p><p>其实这个属性指向了 <code>[[prototype]]</code>，但是 [[prototype]] 是内部属性，我们并不能访问到，所以使用 <em>proto</em> 来访问。</p><p>对象可以通过 <strong>proto</strong> 来寻找不属于该对象的属性，<strong>proto</strong> 将对象连接起来组成了<code>原型链</code>。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>

a<span class="token punctuation">.</span>__proto__<span class="token operator">===</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="事件循环机制-event-loop" tabindex="-1"><a class="header-anchor" href="#事件循环机制-event-loop" aria-hidden="true">#</a> 事件循环机制 （Event Loop）</h3><p>众所周知 JS 是门<code>非阻塞单线程语言</code>，因为在最初 JS 就是为了和浏览器交互而诞生的。</p><p>如果 JS 是门多线程的语言话，我们在多个线程中处理 DOM 就可能会发生问题（一个线程中新加节点，另一个线程中删除节点），当然可以引入读写锁解决这个问题。</p><p>如果遇到异步的代码，会被挂起并加入到 <code>Task</code>（有多种 task） 队列中。一旦执行栈为空，Event Loop 就会从 Task 队列中拿出需要执行的代码并放入执行栈中执行，所以本质上来说 JS 中的异步还是同步行为。</p><blockquote><p>event loop 事件循环 + 同步事件先执行 + 异步事件放置 callback queue + 一旦执行栈为空,调用Task队列异步任务</p></blockquote><p>异步任务划分: 不同的任务源会被分配到不同的 Task 队列中，任务源可以分为 微任务（<code>microtask</code>） 和 宏任务（<code>macrotask</code>）。</p><p>在 ES6 规范中，microtask 称为 <code>jobs</code>，macrotask 称为 <code>task</code>。</p><ul><li>微任务包括: <ul><li><code>process.nextTick</code>，<code>promise</code>，<code>Object.observe</code> ，<code>MutationObserver</code></li></ul></li><li>宏任务包括: <ul><li><code>script</code> ， <code>setTimeout</code> ，<code>setInterval</code> ，<code>setImmediate</code> ，<code>I/O</code> ，<code>UI rendering</code></li></ul></li></ul><p>很多人有个误区，认为<code>微任务</code>快于<code>宏任务</code>，其实是错误的。因为宏任务中包括了 <code>script</code>，</p><p>浏览器会<code>先执行</code>一个宏任务，接下来有<code>异步代码</code>的话就先<code>执行</code>微任务</p><p><strong>所以正确的一次 Event loop 顺序是这样的:</strong></p><ul><li>执行同步代码，这属于宏任务<code>&lt;script&gt;</code></li><li>执行栈为空，查询是否有微任务需要执行</li><li>执行所有微任务</li><li>必要的话渲染 DOM UI</li><li>然后开始下一轮 Event loop，执行宏任务中的异步代码</li></ul><p>通过上述的 Event loop 顺序可知，如果宏任务中的异步代码有大量的计算并且需要操作 DOM 的话，为了更快的 界面响应，我们可以把<code>操作 DOM</code>放入<code>微任务中</code></p><h3 id="箭头函数和普通函数的区别" tabindex="-1"><a class="header-anchor" href="#箭头函数和普通函数的区别" aria-hidden="true">#</a> 箭头函数和普通函数的区别</h3><p>箭头函数无 <code>this</code>，无 <code>prototype</code>,无<code>arguments</code>,无<code>yield</code></p><p><strong>this默认指向父级 + 箭头函数没有自己的this对象</strong></p><ul><li><code>不可以</code>当作<code>构造</code>函数，也就是说，不可以对箭头函数<code>使用new命令</code>，否则会抛出一个错误。</li><li><code>不可以</code>使用<code>arguments</code>对象，该对象在函数体内不存在。如果要用，可以用 rest 参数代替。</li><li><code>不可以</code>使用<code>yield</code>命令，因此箭头函数不能用作 Generator 函数</li></ul><h3 id="你知道es6新增了哪些特性" tabindex="-1"><a class="header-anchor" href="#你知道es6新增了哪些特性" aria-hidden="true">#</a> 你知道ES6新增了哪些特性</h3><ul><li><p>let、const、block作用域</p></li><li><p>箭头函数</p></li><li><p>Spread / Rest 操作符指的是运算符<code>...</code></p></li><li><p>对象和数组的解构</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> a1<span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> b1<span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> c1 <span class="token punctuation">}</span> <span class="token operator">=</span> objlet 
arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">]</span> <span class="token operator">=</span> arr
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>模板语法和分隔符</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token string">&#39;Barret&#39;</span><span class="token punctuation">;</span>  
作为分隔符，$<span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>用来渲染一个变量  

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hi </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hi Barret!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>for…of VS for…in</p><ul><li>for…of 用于遍历一个迭代器，如数组Array,也可用于异步调用</li><li>for…in 用来遍历对象中的属性（只能访问可枚举的）：</li></ul></li><li><p>Map VS WeakMap</p><ul><li>Map 事实上每个对象都可以看作是一个 Map。 一个对象由多个 <code>[key-val]</code> 对构成，在 Map 中，任何类型都可以作为对象的 key <ul><li>Map 是有序结构</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;key1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&quot;key2&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&quot;key3&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">99</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	    m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xxxss&quot;</span><span class="token punctuation">)</span>
	    m<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;key2&quot;</span><span class="token punctuation">)</span>
	    m<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&quot;key3&quot;</span><span class="token punctuation">)</span>

	    <span class="token comment">// 有序结构</span>
	    m<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span>
	    m<span class="token punctuation">.</span>size <span class="token comment">//3</span>

	    <span class="token comment">// 以对象类型为key</span>
	    <span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span> <span class="token punctuation">}</span>
	    m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;object key&quot;</span><span class="token punctuation">)</span>

	    <span class="token comment">// 以fn类型为key</span>
	    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	    m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token string">&quot;fn key&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>WeakMap</strong><ul><li>没有**<code>forEach</code>**和<code>size</code></li><li>因为是弱引用,里面没有<code>index</code>这一属性,引入内部add的数据可能随时被销毁</li></ul></li></ul><p>WeakMap 就是一个 Map，只不过它的所有 key 都是<code>弱引用</code>，意思就是 WeakMap 中的东西<code>不影响垃圾回收</code>,使用它<code>不用担心</code>内存泄漏问题。</p><p>另一个需要注意的点是，WeakMap 的所有 <code>key</code> 必须是<code>对象Object</code>。</p><ul><li>只有四个方法</li></ul><p><code>delete(key)</code>,<code>has(key)</code>,<code>get(key)</code> ,<code>set(key, val)</code> ,<code>无序的</code>,<code>没有size</code>,<code>没有forEach</code></p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">let</span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  w<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token comment">// Uncaught TypeError: Invalid value used as weak map key</span>

  <span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">o2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  o3 <span class="token operator">=</span> window<span class="token punctuation">;</span>

  w<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> <span class="token number">37</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  w<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>o2<span class="token punctuation">,</span> <span class="token string">&quot;azerty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  w<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>o3<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  w<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined, because that is the set value</span>

  w<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
  w<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  w<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Set</strong> VS <strong>WeakSet</strong></p><ul><li>Set 对象是一组<code>不重复</code>的值，重复的值将被忽略，<code>值类型</code>可以是<code>原始类型</code>和<code>引用类型</code></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">let</span> mySet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  mySet<span class="token punctuation">.</span>size<span class="token punctuation">;</span> <span class="token comment">// 3</span>
  mySet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
  mySet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;strings&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  mySet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>基于Set对象的值不重复，即有一种非常方便的数组去重方法：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">let</span> mySet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// mySet =&gt; Set(3) {1, 2, 3}</span>
  <span class="token comment">// Object.prototype.toString.call(mySet) // [object Set]</span>

  <span class="token keyword">let</span> toArray <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>mySet<span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3]</span>
  <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>toArray<span class="token punctuation">)</span> <span class="token comment">// [object Array]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>WeakSet</code> 类似于 WeakMap，<code>WeakSet</code> 对象可以让你在一个集合中保存对象的弱引用，在 WeakSet 中的对象只允许出现一次 <ul><li>只能用<code>object</code>做<code>value</code></li></ul></li></ul></li><li><p>Class 类 ES6 中有 class 语法</p><p>值得注意是，这里的 class 不是新的对象继承模型，它只是<code>原型链</code>的<code>语法糖</code>表现形式</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Creating a new car&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">call</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;parent ---&gt;&#39;</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

      <span class="token keyword">class</span> <span class="token class-name">Porsche</span> <span class="token keyword">extends</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Creating Porsche&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&#39;inner&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">call2</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Porsche</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      c<span class="token punctuation">.</span><span class="token function">call2</span><span class="token punctuation">(</span><span class="token string">&#39;outer&#39;</span><span class="token punctuation">)</span>

      <span class="token comment">// Creating a new car</span>
      <span class="token comment">// Creating Porsche</span>
      <span class="token comment">// parent ---&gt; inner</span>
      <span class="token comment">// parent ---&gt; outer</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>extends</code> 允许一个子类继承父类，需要注意的是，<code>子类的constructor</code> 函数中需要执行 <code>super()</code> 函数。</p><p>当然，你也可以在子类方法中调用父类的方法，如<code>super.parentMethodName()</code>。</p><p>有几点值得注意的是：</p><p>类的<code>声明不会提升</code>（hoisting)，如果你要使用某个 Class，那你必须在<strong>使用之前定义它</strong>，否则会抛出一个 ReferenceError 的错误 在类中定义函数<code>不需要</code>使用 <code>function</code> 关键词</p></li><li><p>Symbol Symbol 是一种新的数据类型，它的值是唯一的，不可变的。 ES6 中提出 symbol 的目的是为了生成一个唯一的标识符，不过你访问不到这个标识符</p></li><li><p>迭代器（<code>Iterators</code>） 迭代器允许<code>每次</code>访问数据集合的<code>一个元素</code>，当指针指向数据集合最后一个元素是，迭代器便会退出。 它提供了 <code>next()</code> 函数来遍历一个序列，这个方法返回一个包含 <code>done</code> 和 <code>value</code> 属性的对象。</p><p>ES6 中可以通过 <code>Symbol.iterator</code> 给对象设置默认的遍历器，无论什么时候对象需要被遍历，执行它的 @@iterator 方法便可以返回一个用于获取值的迭代器。</p><p>Array 数组默认就是一个迭代器：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> itr <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
itr<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value: 11, done: false }</span>
itr<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value: 12, done: false }</span>
itr<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value: 13, done: false }</span>

itr<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value: undefined, done: true }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Generators</p><p><code>Generator</code> 函数是 ES6 的新特性，它允许一个函数返回的<strong>可遍历对象生成多个值</strong>（返回的值为一个迭代器对象）。</p><p>在使用中你会看到 <code>*</code> 语法和一个新的关键词:</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">infiniteNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">yield</span> n<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token function">infiniteNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns an iterable object</span>

  numbers<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value: 1, done: false }</span>
  numbers<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value: 2, done: false }</span>
  numbers<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value: 3, done: false }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每次执行 <code>yield</code> 时，返回的值变为迭代器的下一个值</p></li><li><p>Promise pending :在过程中 resolved : 解决了 rejected : 失败了</p></li></ul><p>1.pending状态：不会触发then或catch 2.resolved状态：会触发后续的then回调函数 3.rejected状态：会触发后续的catch回调函数</p><p><code>resolved</code>状态会继续触发后面的<code>then</code>函数（如果紧跟其后的是<code>catch</code>函数则<code>跳过</code>该<code>catch</code>函数，继续向后寻找then函数），<code>rejected</code>状态会继续触发紧跟其后的<code>catch</code>函数（如果紧跟其后的是then函数则跳过该then函数，继续向后寻找catch函数），由此形成链式调用。</p><p><strong>then和catch只要正常返回，都会返回resolved状态；</strong></p><ul><li><p>Proxy 与 Reflect</p><p><code>Proxy</code> 可以对目标对象的读取、函数调用等操作进行拦截，然后进行操作处理。它不直接操作对象，而是像代理模式，通过对象的代理对象进行操作，在进行这些操作时，可以添加一些需要的额外操作。</p><p><code>Reflect</code> 可以用于获取目标对象的行为，它与<code>Object 类似</code>，但是更易读，为操作对象提供了一种更优雅的方式。</p><p>它的方法与 Proxy 是对应的。未来object的方法转移到Reflect上</p></li><li><p>字符串 ES6 对字符串操作方法的扩展。</p><ul><li>includes()：返回布尔值，判断是否找到参数字符串。</li><li>startsWith()：返回布尔值，判断参数字符串是否在原字符串的头部。</li><li>endsWith()：返回布尔值，判断参数字符串是否在原字符串的尾部。</li><li>repeat()：返回新的字符串，表示将字符串重复指定次数返回。</li><li>padStart：返回新的字符串，表示用参数字符串从头部（左侧）补全原字符串。</li><li>padEnd：返回新的字符串，表示用参数字符串从尾部（右侧）补全原字符串。</li></ul></li><li><p>async / await</p><ul><li>async 是 <code>ES7</code> 才有的与异步操作有关的关键字，和 Promise ， Generator 有很大关联的。</li><li>async 函数返回一个 Promise 对象，可以使用 then 方法添加回调函数。</li><li>async 函数中可能会有 await 表达式，async 函数执行时，如果遇到 await 就会先暂停执行 ，等到触发的异步操作完成后，恢复 async 函数的执行并返回解析值。</li></ul><p>await 关键字只在 async 函数内有效，否则会报错。</p><p>await 返回 Promise 对象的处理结果，如果等待的不是 Promise 对象，则返回该值本身。</p><p>如果一个 <code>Promise</code> 被传递给一个 <code>await</code> 操作符，await 将等待 <code>Promise</code> 正常处理(<code>resolve</code>)完成并返回其处理结果。</p><ul><li><p>await针对所跟不同表达式的处理方式：</p><p><code>Promise</code> 对象：<code>await</code> 会<code>暂停</code>执行，<code>等待</code> Promise 对象 <code>resolve</code>，然后恢复 <code>async</code> 函数的<code>执行</code>并返回解析值。</p><p>非 <code>Promise</code> 对象：<code>直接返回</code>对应的值。</p></li></ul></li></ul><h3 id="let-和-const-区别" tabindex="-1"><a class="header-anchor" href="#let-和-const-区别" aria-hidden="true">#</a> let 和 const 区别</h3><ul><li>let是变量,可修改</li><li>const 是常量,不可修改</li><li>都是块级作用域,var没有</li><li>var有变量提升</li></ul><h3 id="继承的几种方式-实现思路-要求会写" tabindex="-1"><a class="header-anchor" href="#继承的几种方式-实现思路-要求会写" aria-hidden="true">#</a> 继承的几种方式 &amp; 实现思路，要求会写</h3><p>ES5 实现继承总的来说就两种办法:</p><h3 id="组合继承" tabindex="-1"><a class="header-anchor" href="#组合继承" aria-hidden="true">#</a> 组合继承</h3><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> value
<span class="token punctuation">}</span>
<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getValue</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>val<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

child<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
child <span class="token keyword">instanceof</span> <span class="token class-name">Parent</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上继承的方式核心是在<code>子类</code>的构造函数中通过 <code>Parent.call(this)</code> 继承父类的属性，然后改变子类的原型为 <code>new Parent()</code> 来<code>继承父类</code>的函数。</p><p>这种继承方式优点在于<code>构造函数可以传参</code>，不会与父类<code>引用属性共享</code>，可以<code>复用</code>父类的函数，但是也存在一个缺点就是在<code>继承父类函数</code>的时候<code>调用</code>了父类<code>构造函数</code>，导致<code>子类的原型上多了不需要的父类属性</code>，存在<code>内存</code>上的<code>浪费</code>。</p><h3 id="寄生组合继承" tabindex="-1"><a class="header-anchor" href="#寄生组合继承" aria-hidden="true">#</a> 寄生组合继承</h3><p>这种继承方式对组合继承进行了优化，<code>组合继承缺点</code>在于<code>继承父类函数时调用了构造函数</code>，我们只需要优化掉这点就行了</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> value
<span class="token punctuation">}</span>
<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getValue</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>val<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">constructor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">value</span><span class="token operator">:</span> Child<span class="token punctuation">,</span>
		<span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

child<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
child <span class="token keyword">instanceof</span> <span class="token class-name">Parent</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上继承实现的核心就是将<code>父类</code>的<code>原型赋值</code>给<code>子类</code>，并且将<code>构造函数</code>设置为子类，这样既解决了无用的父类属性问题，还能正确的找到子类的构造函数</p><p>继承还存在强耦合的情况，不管怎么样子类都会和它的父类耦合在一起。</p><h3 id="什么是promise-要求会写" tabindex="-1"><a class="header-anchor" href="#什么是promise-要求会写" aria-hidden="true">#</a> 什么是Promise，要求会写</h3><p>promise的内容分为<code>构造</code>函数、<code>实例</code>方法和<code>静态</code>方法</p><ul><li>1个构造函数： new Promise</li><li>2个实例方法：.then 和 .catch</li><li>4个静态方法：Promise.all、Promise.race、Promise.resolve和Promise.reject</li></ul><p>Promise必然处在三种状态:</p><ul><li><p>待定（<code>pending</code>）: 初始状态，既没有被兑现，也没有被拒绝。</p></li><li><p>已兑现（<code>fulfilled</code>/resolve）: 意味着操作成功完成。</p></li><li><p>已拒绝（<code>rejected</code>）: 意味着操作失败</p></li><li><p>catch之后还可以继续链式调用吗，为什么 <code>resolved</code>状态会继续触发后面的<code>then</code>函数（如果紧跟其后的是<code>catch</code>函数则<code>跳过</code>该<code>catch</code>函数，继续向后寻找then函数），<code>rejected</code>状态会继续触发紧跟其后的<code>catch</code>函数（如果紧跟其后的是then函数则跳过该then函数，继续向后寻找catch函数），由此形成链式调用。 <strong>then和catch只要正常返回，都会返回resolved状态；</strong></p></li><li><p>finally之后还可以继续链式调用吗，为什么</p></li></ul><p><strong>什么是 promise.all</strong></p><p>这个方法返回一个新的promise对象，该promise对象在iterable参数对象里<code>所有的promise对象</code>都<code>resolve</code>成功的时候才会触发成功，一旦有任何一个iterable里面的promise对象失败则立即触发该promise对象的失败</p><p><strong>Promise.all可以将<code>多个Promise实例</code>包装成一个新的Promise实例。同时，成功和失败的返回值是不同的，<code>成功</code>的时候返回的是一个<code>结果数组</code>，而<code>失败</code>的时候则返回<code>最先被reject</code>失败状态的值。</strong></p><ul><li>有失败就等待所有运行结束抛错</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">let</span> <span class="token function-variable function">wake</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time <span class="token operator">/</span> <span class="token number">1000</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">秒后醒来</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">wakeFail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time <span class="token operator">/</span> <span class="token number">1000</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">秒后失败醒来</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token function">wake</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token function">wakeFail</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>       <span class="token comment">// 5秒后失败醒来</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
Promise <span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pending</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">}
最终结果:--&gt; 5秒后失败醒来

</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">let</span> <span class="token function-variable function">wake</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time <span class="token operator">/</span> <span class="token number">1000</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">秒后醒来</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token function">wake</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token function">wake</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>       <span class="token comment">// [ &#39;3秒后醒来&#39;, &#39;2秒后醒来&#39; ]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Promise.all获得的<code>成功结果</code>的数组里面的<code>数据顺序</code>和Promise.all<code>接收</code>到的<code>数组顺序</code>是<code>一致的</code>，即p1的结果在前，即便p1的结果获取的比p2要晚。这带来了一个绝大的好处：在前端开发请求数据的过程中，偶尔会遇到发送多个请求并根据请求顺序获取和使用数据的场景，使用Promise.all毫无疑问可以解决这个问题。</p><p><strong>什么是 promise.race</strong></p><ul><li>Promise.race()静态方法返回一个包装期约，是一组集合中最先解决或拒绝的期约的镜像</li><li>Promise.race()不会对解决或拒绝的期约区别对待。无论是解决还是拒绝，只要是<code>第一个落定</code>的 期约，Promise.race()就会包装其<code>解决值</code>或<code>拒绝理由</code>并<code>返回</code>新期约</li></ul><p>顾名思义，Promse.<code>race</code>就是<code>赛跑</code>的意思，意思就是说，Promise.race([p1, p2, p3])里面<strong>哪个结果获得的快，就返回那个结果</strong>，不管结果本身是成功状态还是失败状态。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;failed&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>  <span class="token comment">// 打开的是 &#39;failed&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="深浅拷贝-要会写" tabindex="-1"><a class="header-anchor" href="#深浅拷贝-要会写" aria-hidden="true">#</a> 深浅拷贝 要会写</h3><ul><li>深浅拷贝区别</li></ul><p>浅拷贝:内存地址的引用;<code>Object.assign</code></p><p>深拷贝:值得完全赋值,开辟新的内存空间</p><ul><li>实现深拷贝有几种方法</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>  <span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>    

<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token operator">!==</span><span class="token string">&#39;object&#39;</span> <span class="token operator">||</span> obj<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      
<span class="token comment">// obj是null，或者不是对象和数组，直接返回       </span>
 <span class="token keyword">return</span> obj     
 <span class="token punctuation">}</span>      
<span class="token comment">// 初始化返回结果    </span>
<span class="token keyword">let</span> result      
<span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>          
 result <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>      
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>           
 result<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>     
 <span class="token punctuation">}</span>      
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>  
    <span class="token comment">// 保证key不是原型的属性     </span>
 <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
        result<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> 
     <span class="token punctuation">}</span>   
   <span class="token punctuation">}</span>        
  <span class="token keyword">return</span> result  
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>利用JSON.parse 和 JSON.stringify 实现的深拷贝有什么弊端，为什么</li></ul><p>你会发现在上述情况中，该方法会忽略掉函数和 undefined 。 - 会忽略 <code>undefined</code> - 会忽略 <code>symbol</code> - 不能<code>序列化</code>函数 - 不能<code>解决循环引用</code>的对象</p><pre><code>```jsx
let a = {    
	age: undefined,    
	sex: Symbol(&#39;male&#39;),    
	jobs: function() {},    
	name: &#39;yck&#39;
}  

let b = JSON.parse(JSON.stringify(a))  

console.log(b) // {name: &quot;yck&quot;}
```
</code></pre><h3 id="什么是防抖-节流-它们的区别是什么-要求会写" tabindex="-1"><a class="header-anchor" href="#什么是防抖-节流-它们的区别是什么-要求会写" aria-hidden="true">#</a> 什么是防抖&amp;节流，它们的区别是什么，要求会写</h3><p>防抖和节流的作用都是防止函数多次调用。 区别在于，假设一个用户一直触发这个函数，且每次触发函数的间隔小于wait， <code>防抖</code>情况下只会<code>调用一次</code>，而节流的 情况会<code>每隔一定时间</code>（参数wait）调用函数。</p><p>防抖: 类似公交车–&gt;固定时间发车–&gt;有人上–&gt;时间重读–&gt;没人上–&gt;时间到了发动</p><p>一般的防抖会有<code>immediate</code>选项，表示是否立即调用</p><p>节流:fun固定频率执行,固定时间内只能执行一次</p><p>防抖动是将多次执行变为最后一次执行，<strong>节流是将多次执行变成每隔一段时间执行。</strong></p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>  <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> timer <span class="token operator">=</span> <span class="token number">1000</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       
			<span class="token keyword">let</span> prevTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      
			<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
			<span class="token keyword">let</span> nowTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        
			<span class="token keyword">if</span> <span class="token punctuation">(</span>nowTime <span class="token operator">-</span> prevTime <span class="token operator">&gt;</span> timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>          
			<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>          
			prevTime <span class="token operator">=</span> nowTime        
			<span class="token punctuation">}</span>      
<span class="token punctuation">}</span>    
<span class="token punctuation">}</span>    

<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> times <span class="token operator">=</span> <span class="token number">1000</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      
		<span class="token keyword">let</span> timerOut<span class="token punctuation">;</span>      
		<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
		<span class="token keyword">if</span> <span class="token punctuation">(</span>timerOut<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timerOut<span class="token punctuation">)</span>        
		timerOut <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>          
		<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>       
		 <span class="token punctuation">}</span><span class="token punctuation">,</span> times<span class="token punctuation">)</span>      
<span class="token punctuation">}</span>    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="事件触发机制-注册事件" tabindex="-1"><a class="header-anchor" href="#事件触发机制-注册事件" aria-hidden="true">#</a> 事件触发机制&amp;注册事件</h3><p>通常我们使用 <code>addEventListener</code> 注册事件，该函数的第三个参数可以是布尔值，也可以是对象。</p><p>对于布尔值 useCapture 参数来说，该参数默认值为 <code>false</code> (冒泡)。</p><p>useCapture 决定了注册的事件是捕获事件还是冒泡事件。对于对象参数来说，可以使用以下几个属性</p><ul><li>capture，布尔值，和 useCapture 作用一样</li><li>once，布尔值，值为 true 表示该回调只会调用一次，调用后会移除监听</li><li>passive，布尔值，表示永远不会调用 preventDefault</li></ul><p>一般来说，我们只希望事件只触发在目标上，这时候可以使用 stopPropagation 来阻止事件的进一步传播。通常我们认为 stopPropagation 是用来阻止事件冒泡的，其实该函数也可以阻止捕获事件。stopImmediatePropagation 同样也能实现阻止事件，但是还能阻止该事件目标执行别的注册事件。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// 以下会先打印冒泡然后是捕获</span>
node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>  <span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span>  <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;冒泡&#39;</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token boolean">false</span><span class="token punctuation">)</span>

node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>  <span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span>  <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;捕获 &#39;</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="map-filter-reduce-手写" tabindex="-1"><a class="header-anchor" href="#map-filter-reduce-手写" aria-hidden="true">#</a> Map /filter / reduce 手写</h3><p><a href="https://juejin.cn/post/6946022649768181774" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6946022649768181774<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><code>Map</code> 作用是生成一个新数组，遍历原数组，将每个元素拿出来做一些变换然后 <code>append</code> 到新的数组中</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">map2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;this is null or not defined&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span>callback <span class="token operator">+</span> <span class="token string">&#39; is not a function&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token constant">O</span> <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> <span class="token constant">O</span><span class="token punctuation">.</span>length <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span>

  <span class="token keyword">let</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token keyword">in</span> <span class="token constant">O</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

         res<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token constant">O</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> <span class="token constant">O</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        k<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Reduce</code> 作用是数组中的值组合起来，最终得到一个值</p><h3 id="数组扁平化-手写" tabindex="-1"><a class="header-anchor" href="#数组扁平化-手写" aria-hidden="true">#</a> 数组扁平化 手写</h3><p><strong>数组扁平化方法 <code>Array.prototype.flat()</code> 也叫数组拍平、数组拉平、数组降维</strong></p><p>Array.prototype.flat() 用于将嵌套的数组“拉平”，变成一维的数组。该方法返回一个新数组，对原数据没有影响。 不传参数时，默认“拉平”一层，可以传入一个整数，表示想要“拉平”的层数。 传入 &lt;=0 的整数将返回原数组，不“拉平”。 Infinity 关键字作为参数时，无论多少层嵌套，都会转为一维数组。 如果原数组有空位，Array.prototype.flat() 会跳过空位。 思路:</p><p>实现一个有数组扁平化功能的 <code>flat</code> 函数，<strong>我们要做的就是在数组中找到是数组类型的元素，然后将他们展开</strong>。这就是实现数组拍平 <code>flat</code> 方法的关键思路。</p><ul><li>第一要遍历数组的每一个元素； <ul><li><code>for 循环</code></li><li><code>for...of</code></li><li><code>for...in</code></li><li><code>forEach()</code></li><li><code>entries()</code></li><li><code>keys()</code></li><li><code>values()</code></li><li><code>reduce()</code></li><li><code>map()</code></li></ul></li><li>第二判断元素是否是数组； <ul><li><code>instanceof</code></li><li><code>constructor</code></li><li><code>Object.prototype.toString</code></li><li><code>isArray</code></li></ul></li><li>第三将数组的元素展开一层 <ul><li>扩展运算符(…) + <code>concat</code></li><li><code>concat</code> +<code>apply</code></li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//写法一</span>
<span class="token keyword">function</span> <span class="token function">flatDeep</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> d <span class="token operator">&gt;</span> <span class="token number">0</span>
		<span class="token operator">?</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> acc<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">flatDeep</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> acc<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
		  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token operator">:</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//forEach+push+递归</span>
<span class="token keyword">function</span> <span class="token function">flatDeep2</span><span class="token punctuation">(</span><span class="token parameter">arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">flat</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> d <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">flat</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatDeep2</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[ 0, 1, 2, 3, 4 ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实现一个数组乱序" tabindex="-1"><a class="header-anchor" href="#实现一个数组乱序" aria-hidden="true">#</a> 实现一个数组乱序</h3><ul><li>Fisher–Yates shuffle</li><li>sort—&gt;排序顺序可以是按字母或数字，也可以是升序（向上）或降序（向下) sort() 方法比较两个值时，将值发送给比较函数，根据返回的<code>（负、零、正）</code>值对值进行排序。</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">var</span> points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 按降序对数组中的数字进行排序</span>
points<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> b<span class="token operator">-</span>a<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token comment">// 数组中的第一项 (points[0]) 现在是最高值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
它并不能真正地随机打乱数组。
<span class="token class-name">看了一下ECMAScript中关于Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>comparefn<span class="token punctuation">)</span>的标准，其中并没有规定具体的实现算法，但是提到一点：

Calling <span class="token function">comparefn</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> always returns the same value v when given a specific pair <span class="token keyword">of</span> values a and b <span class="token keyword">as</span> its two arguments<span class="token punctuation">.</span>

<span class="token function">也就是说，对同一组a、b的值，comparefn</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
需要总是返回相同的值。
<span class="token function">而上面的</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token function">（即</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span>）
显然不满足这个条件。

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>既然(a, b) =&gt; Math.random() - 0.5的问题是不能保证针对同一组a、b每次返回的值相同，那么我们不妨将数组元素改造一下，比如将每个元素i改造为：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">let</span> new_i <span class="token operator">=</span> <span class="token punctuation">{</span>

    <span class="token literal-property property">v</span><span class="token operator">:</span> i<span class="token punctuation">,</span>

    <span class="token literal-property property">r</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//原来的值存储在键v中，同时给它增加一个键r，值为一个随机数，然后排序时比较这个随机数：</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>r <span class="token operator">-</span> b<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//完整代码</span>

<span class="token keyword">function</span> <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">let</span> new_arr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">v</span><span class="token operator">:</span> i<span class="token punctuation">,</span> <span class="token literal-property property">r</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    new_arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>r <span class="token operator">-</span> b<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>

    arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token operator">...</span>new_arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;c&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;f&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;g&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;h&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;i&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;j&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token function">shuffle</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

    count<span class="token punctuation">[</span>a<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="给你一个字符串-得到其中最长连续字符的长度-aaabbcd-得到3-aabbbbaaaccdd-得到4" tabindex="-1"><a class="header-anchor" href="#给你一个字符串-得到其中最长连续字符的长度-aaabbcd-得到3-aabbbbaaaccdd-得到4" aria-hidden="true">#</a> 给你一个字符串, 得到其中最长连续字符的长度 （ aaabbcd 得到3 aabbbbaaaccdd 得到4）</h3></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Last Updated 11/26/2023, 3:28:23 PM<!--]--></span></span></div></footer><nav class="page-nav"><p class="hasNext inner"><!----><span class="page-nav-item next">CSS → </span></p></nav><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#javascript-es专题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="JavaScript &amp; ES专题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript &amp; ES专题<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#什么是执行上下文" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="什么是执行上下文"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->什么是执行上下文<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#script异步加载-js-脚本时-async-与-defer-有何区别" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="script异步加载 JS 脚本时，async 与 defer 有何区别"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->script异步加载 JS 脚本时，async 与 defer 有何区别<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#什么是闭包-闭包的使用场景-如何清理垃圾回收" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="什么是闭包，闭包的使用场景 &amp; 如何清理垃圾回收"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->什么是闭包，闭包的使用场景 &amp; 如何清理垃圾回收<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#this-是什么-绑定方式-call-apply-bind" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="this 是什么 &amp; 绑定方式（call apply bind）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->this 是什么 &amp; 绑定方式（call apply bind）<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#什么是原型-原型链" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="什么是原型 &amp; 原型链"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->什么是原型 &amp; 原型链<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#事件循环机制-event-loop" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="事件循环机制 （Event Loop）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->事件循环机制 （Event Loop）<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#箭头函数和普通函数的区别" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="箭头函数和普通函数的区别"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->箭头函数和普通函数的区别<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#你知道es6新增了哪些特性" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="你知道ES6新增了哪些特性"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->你知道ES6新增了哪些特性<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#let-和-const-区别" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="let 和 const 区别"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->let 和 const 区别<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#继承的几种方式-实现思路-要求会写" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="继承的几种方式 &amp; 实现思路，要求会写"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->继承的几种方式 &amp; 实现思路，要求会写<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#组合继承" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="组合继承"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->组合继承<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#寄生组合继承" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="寄生组合继承"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->寄生组合继承<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#什么是promise-要求会写" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="什么是Promise，要求会写"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->什么是Promise，要求会写<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#深浅拷贝-要会写" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="深浅拷贝 要会写"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->深浅拷贝 要会写<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#什么是防抖-节流-它们的区别是什么-要求会写" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="什么是防抖&amp;节流，它们的区别是什么，要求会写"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->什么是防抖&amp;节流，它们的区别是什么，要求会写<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#事件触发机制-注册事件" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="事件触发机制&amp;注册事件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->事件触发机制&amp;注册事件<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#map-filter-reduce-手写" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="Map /filter / reduce 手写"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Map /filter / reduce 手写<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#数组扁平化-手写" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="数组扁平化 手写"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->数组扁平化 手写<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#实现一个数组乱序" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="实现一个数组乱序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->实现一个数组乱序<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/nostalgia/blogs/frontend/question/js.html#给你一个字符串-得到其中最长连续字符的长度-aaabbcd-得到3-aabbbbaaaccdd-得到4" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="给你一个字符串, 得到其中最长连续字符的长度 （ aaabbcd 得到3 aabbbbaaaccdd 得到4）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->给你一个字符串, 得到其中最长连续字符的长度 （ aaabbcd 得到3 aabbbbaaaccdd 得到4）<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/nostalgia/assets/app-c5939a72.js" defer></script>
  </body>
</html>
